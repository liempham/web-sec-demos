<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i h·ªçc v·ªÅ IDOR</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            background-color: #1d2b3a;
            color: white;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            scroll-behavior: smooth
        }

        .section {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 40px 20px;
            box-sizing: border-box;
            min-height: 100vh
        }

        .demo-section {
            background-color: #1d2b3a
        }

        .lesson-section {
            background-color: #f0f2f5;
            color: #333;
            min-height: auto;
            padding-bottom: 60px
        }

        .container {
            width: 100%;
            max-width: 650px
        }

        h1 {
            font-size: clamp(2em, 8vw, 3em);
            margin-bottom: 20px
        }

        .lesson-section h1,
        .lesson-section h2 {
            color: #333
        }

        .lesson-section h2 {
            border-bottom: 2px solid #ddd;
            padding-bottom: 10px;
            margin-top: 40px
        }

        p {
            font-size: clamp(1em, 4vw, 1.2em);
            line-height: 1.6;
            margin-bottom: 25px;
            color: #bdc3c7
        }

        .lesson-section p,
        .lesson-section li {
            color: #555;
            text-align: left
        }

        .lesson-section ul {
            padding-left: 25px
        }

        .step-box {
            background-color: #2c3e50;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 5px solid #4a90e2;
            text-align: left
        }

        .step-box h3 {
            margin-top: 0
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin: 15px 0
        }

        button {
            width: 100%;
            padding: 15px;
            font-size: 1.1em;
            border-radius: 10px;
            box-sizing: border-box;
            font-weight: 600;
            border: none;
            cursor: pointer
        }

        #viewOrderBtn1 {
            background-color: #28a745
        }

        #viewOrderBtn2 {
            background-color: #17a2b8
        }

        #order-details {
            background-color: #111;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #333;
            min-height: 80px;
            text-align: left;
            font-family: 'Courier New', Courier, monospace
        }

        .mermaid-container {
            width: 100%;
            margin-top: 30px
        }

        @media (min-width:992px) {
            .lesson-section .container {
                max-width: 900px
            }

            .mermaid-container {
                margin-top: 40px
            }
        }
    </style>
</head>

<body>
    <div class="section demo-section">
        <div class="container">
            <h1>üîí Th·ª≠ nghi·ªám Broken Access Control (IDOR) üîí</h1>
            <p>B·∫°n ƒëang ƒëƒÉng nh·∫≠p v·ªõi t∆∞ c√°ch `UserA`. H√£y th·ª≠ xem ƒë∆°n h√†ng c·ªßa m√¨nh, sau ƒë√≥ t·∫•n c√¥ng ƒë·ªÉ xem tr·ªôm ƒë∆°n
                h√†ng c·ªßa `UserB`.</p>
            <div class="step-box">
                <h3>B∆∞·ªõc 1: Xem ƒë∆°n h√†ng c·ªßa b·∫°n</h3>
                <p>Nh·∫•n c√°c n√∫t b√™n d∆∞·ªõi ƒë·ªÉ xem c√°c ƒë∆°n h√†ng m√† b·∫°n ƒë∆∞·ª£c ph√©p truy c·∫≠p (ID: 101, 102).</p>
                <div class="button-group">
                    <button id="viewOrderBtn1" onclick="viewOrder(101)">Xem ƒë∆°n h√†ng #101</button><button
                        id="viewOrderBtn2" onclick="viewOrder(102)">Xem ƒë∆°n h√†ng #102</button>
                </div>
            </div>
            <div class="step-box">
                <h3>B∆∞·ªõc 2: T·∫•n c√¥ng IDOR!</h3>
                <p>H·ªá th·ªëng kh√¥ng ki·ªÉm tra quy·ªÅn s·ªü h·ªØu! H√£y m·ªü <b>Developer Tools (F12)</b>, v√†o tab <b>Console</b> v√†
                    g√µ l·ªánh <code>viewOrder(201)</code> r·ªìi Enter ƒë·ªÉ xem tr·ªôm ƒë∆°n h√†ng c·ªßa UserB.</p>
            </div>
            <h2>Chi ti·∫øt ƒë∆°n h√†ng:</h2>
            <div id="order-details"></div>
        </div>
    </div>
    <div class="section lesson-section">
        <div class="container">
            <h1>Broken Access Control l√† g√¨?</h1>
            <p style="text-align:center;">L·ªói n√†y x·∫£y ra khi h·ªá th·ªëng kh√¥ng ki·ªÉm tra k·ªπ xem m·ªôt ng∆∞·ªùi d√πng c√≥ th·ª±c s·ª±
                ƒë∆∞·ª£c ph√©p th·ª±c hi·ªán m·ªôt h√†nh ƒë·ªông hay kh√¥ng. D·∫°ng ph·ªï bi·∫øn nh·∫•t l√† <strong>IDOR</strong>. T∆∞·ªüng t∆∞·ª£ng
                URL xem h√≥a ƒë∆°n l√† `...?id=123`. N·∫øu b·∫°n ch·ªâ c·∫ßn ƒë·ªïi th√†nh `id=124` v√† xem ƒë∆∞·ª£c h√≥a ƒë∆°n c·ªßa ng∆∞·ªùi kh√°c,
                ƒë√≥ ch√≠nh l√† IDOR.</p>
            <h2>M·ªôt s·ªë d·∫°ng L·ªói Ki·ªÉm so√°t Truy c·∫≠p</h2>
            <ul>
                <li><strong>IDOR:</strong> Thay ƒë·ªïi m·ªôt tham s·ªë trong URL (nh∆∞ ID) ƒë·ªÉ truy c·∫≠p v√†o d·ªØ li·ªáu c·ªßa ng∆∞·ªùi
                    d√πng kh√°c.</li>
                <li><strong>Path Traversal:</strong> Thao t√∫ng c√°c tham s·ªë file ƒë·ªÉ truy c·∫≠p c√°c t·ªáp tin ngo√†i th∆∞ m·ª•c
                    cho ph√©p.</li>
                <li><strong>Leo thang ƒë·∫∑c quy·ªÅn (Privilege Escalation):</strong> M·ªôt ng∆∞·ªùi d√πng th∆∞·ªùng c√≥ th·ªÉ th·ª±c hi·ªán
                    c√°c ch·ª©c nƒÉng ch·ªâ d√†nh cho qu·∫£n tr·ªã vi√™n.</li>
            </ul>
            <p style="background-color: #e3f2fd; border-left: 5px solid #4a90e2; padding: 15px; margin-top: 30px;">
                <strong>L∆∞u √Ω:</strong> V√≠ d·ª• trong demo n√†y t·∫≠p trung v√†o tr∆∞·ªùng h·ª£p kinh ƒëi·ªÉn c·ªßa
                <strong>IDOR</strong>, n∆°i b·∫°n c√≥ th·ªÉ truy c·∫≠p v√†o m·ªôt "ƒë·ªëi t∆∞·ª£ng" (ƒë∆°n h√†ng) c·ªßa ng∆∞·ªùi kh√°c ch·ªâ b·∫±ng
                c√°ch thay ƒë·ªïi ID.
            </p>
            <h2>L√†m th·∫ø n√†o ƒë·ªÉ kh·∫Øc ph·ª•c?</h2>
            <ul>
                <li><strong>Lu√¥n ki·ªÉm tra quy·ªÅn s·ªü h·ªØu ·ªü ph√≠a m√°y ch·ªß:</strong> V·ªõi m·ªçi y√™u c·∫ßu truy c·∫≠p d·ªØ li·ªáu, m√°y
                    ch·ªß ph·∫£i x√°c minh: "Ng∆∞·ªùi d√πng ƒëang ƒëƒÉng nh·∫≠p (`loggedInUser`) c√≥ ph·∫£i l√† ch·ªß s·ªü h·ªØu c·ªßa ƒë·ªëi t∆∞·ª£ng
                    (`order.owner`) m√† h·ªç ƒëang y√™u c·∫ßu kh√¥ng?". Kh√¥ng bao gi·ªù tin t∆∞·ªüng v√†o ID do ng∆∞·ªùi d√πng g·ª≠i l√™n.
                </li>
                <li><strong>S·ª≠ d·ª•ng ID kh√¥ng th·ªÉ ƒëo√°n ƒë∆∞·ª£c:</strong> Thay v√¨ d√πng c√°c ID tu·∫ßn t·ª± (1, 2, 3), h√£y d√πng c√°c
                    chu·ªói ƒë·ªãnh danh ng·∫´u nhi√™n, ph·ª©c t·∫°p (nh∆∞ UUIDs), khi·∫øn k·∫ª t·∫•n c√¥ng kh√¥ng th·ªÉ ƒëo√°n ra ID c·ªßa c√°c ƒë·ªëi
                    t∆∞·ª£ng kh√°c.</li>
            </ul>
            <div class="mermaid-container">
                <div class="mermaid">
                    sequenceDiagram
                    participant Attacker as Ng∆∞·ªùi d√πng A (K·∫ª t·∫•n c√¥ng)
                    participant WebApp as ·ª®ng d·ª•ng Web
                    participant Database as C∆° s·ªü d·ªØ li·ªáu
                    Attacker->>WebApp: 1. Y√™u c·∫ßu xem ƒë∆°n h√†ng c·ªßa m√¨nh: `viewOrder(101)`
                    WebApp->>Database: L·∫•y ƒë∆°n h√†ng c√≥ ID = 101
                    Database-->>WebApp: Tr·∫£ v·ªÅ chi ti·∫øt ƒë∆°n h√†ng #101
                    WebApp-->>Attacker: Hi·ªÉn th·ªã chi ti·∫øt ƒë∆°n h√†ng #101
                    Note right of Attacker: Attacker ƒëo√°n ho·∫∑c th·ª≠ ID kh√°c
                    Attacker->>WebApp: 2. G·ª≠i y√™u c·∫ßu xem ƒë∆°n h√†ng c·ªßa ng∆∞·ªùi kh√°c: `viewOrder(201)`
                    Note right of WebApp: L·ªñI: Kh√¥ng ki·ªÉm tra<br />ng∆∞·ªùi d√πng A c√≥ s·ªü h·ªØu ƒë∆°n h√†ng 201 kh√¥ng!
                    WebApp->>Database: L·∫•y ƒë∆°n h√†ng c√≥ ID = 201
                    Database-->>WebApp: Tr·∫£ v·ªÅ chi ti·∫øt ƒë∆°n h√†ng #201
                    WebApp-->>Attacker: 3. Hi·ªÉn th·ªã th√¥ng tin ƒë∆°n h√†ng<br />c·ªßa ng∆∞·ªùi d√πng B cho k·∫ª t·∫•n c√¥ng
                </div>
            </div>
        </div>
    </div>
    <script>
        const fakeOrders = { 101: { owner: 'UserA', item: 'Laptop Gaming', amount: '35,000,000 VND' }, 102: { owner: 'UserA', item: 'B√†n ph√≠m c∆°', amount: '2,500,000 VND' }, 201: { owner: 'UserB', item: 'ƒêi·ªán tho·∫°i m·ªõi', amount: '28,000,000 VND', note: 'Giao h√†ng b√≠ m·∫≠t, ƒë·ª´ng cho UserA bi·∫øt!' } }; const loggedInUser = 'UserA', detailsArea = document.getElementById("order-details"); function viewOrder(orderId) { const order = fakeOrders[orderId]; detailsArea.innerHTML = ''; if (order) { let content = `<strong>ƒê∆°n h√†ng ID:</strong> ${orderId}<br><strong>S·∫£n ph·∫©m:</strong> ${order.item}<br><strong>Gi√° tr·ªã:</strong> ${order.amount}`; order.note && (content += `<br><strong style="color:#e74c3c;">Ghi ch√∫ ri√™ng t∆∞:</strong> ${order.note}`); order.owner !== loggedInUser && (content += `<br><p style="color: #ffc107; margin-top:10px;"><strong>C·∫¢NH B√ÅO:</strong> B·∫°n ƒë√£ truy c·∫≠p th√†nh c√¥ng v√†o d·ªØ li·ªáu c·ªßa ${order.owner}!</p>`); detailsArea.innerHTML = content } else { detailsArea.textContent = `Kh√¥ng t√¨m th·∫•y ƒë∆°n h√†ng v·ªõi ID: ${orderId}` } };
    </script>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10.9.0/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'base' });
    </script>
</body>

</html>