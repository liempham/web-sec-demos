<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i h·ªçc v·ªÅ Vulnerable Components</title>
    <style>
        /* CSS t∆∞∆°ng t·ª± c√°c b√†i kh√°c */
        html,
        body {
            margin: 0;
            padding: 0;
            background-color: #1d2b3a;
            color: white;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            scroll-behavior: smooth;
        }

        .section {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 40px 20px;
            box-sizing: border-box;
            min-height: 100vh;
        }

        .demo-section {
            background-color: #1d2b3a;
        }

        .lesson-section {
            background-color: #f0f2f5;
            color: #333;
            min-height: auto;
            padding-bottom: 60px;
        }

        .container {
            width: 100%;
            max-width: 650px;
        }

        h1 {
            font-size: clamp(2em, 8vw, 3em);
            margin-bottom: 20px;
        }

        .lesson-section h1,
        .lesson-section h2 {
            color: #333;
        }

        .lesson-section h2 {
            border-bottom: 2px solid #ddd;
            padding-bottom: 10px;
            margin-top: 40px;
        }

        p {
            font-size: clamp(1em, 4vw, 1.2em);
            line-height: 1.6;
            margin-bottom: 25px;
            color: #bdc3c7;
        }

        .lesson-section p,
        .lesson-section li {
            color: #555;
            text-align: left;
        }

        .lesson-section ul {
            padding-left: 25px;
        }

        .component-info {
            background: #2c3e50;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .component-info code {
            color: #ffc107;
        }

        .comment-box {
            width: 95%;
            height: 80px;
            padding: 10px;
            background: #111;
            color: white;
            border: 1px solid #555;
            border-radius: 5px;
        }

        button {
            padding: 12px 25px;
            font-size: 1.1em;
            font-weight: 600;
            background-color: #4a90e2;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 10px;
        }

        #patched-info {
            color: #28a745;
            font-weight: bold;
        }

        .mermaid-container {
            width: 100%;
            margin-top: 30px;
        }

        @media (min-width: 992px) {
            .lesson-section .container {
                max-width: 900px;
            }

            .mermaid-container {
                margin-top: 40px;
            }
        }
    </style>
</head>

<body>
    <div class="section demo-section">
        <div class="container">
            <h1>üì¶ Th·ª≠ nghi·ªám Th√†nh ph·∫ßn L·ªói th·ªùi üì¶</h1>
            <p>Trang n√†y s·ª≠ d·ª•ng m·ªôt th∆∞ vi·ªán c·ªßa b√™n th·ª© ba ƒë·ªÉ hi·ªÉn th·ªã b√¨nh lu·∫≠n. H√£y th·ª≠ g·ª≠i m·ªôt b√¨nh lu·∫≠n ch·ª©a m√£
                khai th√°c ƒë·ªÉ xem ƒëi·ªÅu g√¨ x·∫£y ra.</p>
            <div class="component-info">
                Th∆∞ vi·ªán ƒëang d√πng: <code>render-comments.js v1.0 (L·ªói th·ªùi)</code>
                <p id="patched-info" style="display:none;">ƒê√£ c·∫≠p nh·∫≠t l√™n v2.0 (An to√†n)!</p>
            </div>
            <textarea id="comment" class="comment-box"><img src=x onerror=alert('XSS_from_Old_Library!')></textarea>
            <button onclick="postComment()">G·ª≠i b√¨nh lu·∫≠n</button>
            <button onclick="patchLibrary()" style="background-color:#ffc107; color:#333">C·∫≠p nh·∫≠t th∆∞ vi·ªán!</button>
        </div>
    </div>
    <div class="section lesson-section">
        <div class="container">
            <h1>A06: Vulnerable and Outdated Components l√† g√¨?</h1>
            <p style="text-align:center;">H√£y t∆∞·ªüng t∆∞·ª£ng trang web c·ªßa b·∫°n l√† m·ªôt ng√¥i nh√† ƒë∆∞·ª£c x√¢y t·ª´ nhi·ªÅu lo·∫°i g·∫°ch
                (code). M·ªôt s·ªë g·∫°ch b·∫°n t·ª± l√†m, m·ªôt s·ªë kh√°c b·∫°n mua t·ª´ c√°c nh√† cung c·∫•p (th∆∞ vi·ªán b√™n th·ª© ba). N·∫øu m·ªôt
                nh√† cung c·∫•p th√¥ng b√°o r·∫±ng l√¥ g·∫°ch c·ªßa h·ªç c√≥ l·ªó h·ªïng nghi√™m tr·ªçng, nh∆∞ng b·∫°n kh√¥ng thay th·∫ø ch√∫ng, ng√¥i
                nh√† c·ªßa b·∫°n s·∫Ω c√≥ nguy c∆° s·ª•p ƒë·ªï. L·ªói n√†y ch√≠nh l√† vi·ªác s·ª≠ d·ª•ng c√°c th√†nh ph·∫ßn ƒë√£ ƒë∆∞·ª£c c√¥ng b·ªë l√† c√≥ l·ªó
                h·ªïng b·∫£o m·∫≠t.</p>
            <h2>R·ªßi ro ƒë·∫øn t·ª´ ƒë√¢u?</h2>
            <ul>
                <li>B·∫°n ƒëang s·ª≠ d·ª•ng c√°c ph·∫ßn m·ªÅm ph√≠a client ho·∫∑c server kh√¥ng ƒë∆∞·ª£c h·ªó tr·ª£ ho·∫∑c ƒë√£ l·ªói th·ªùi (h·ªá ƒëi·ªÅu
                    h√†nh, m√°y ch·ªß web, CSDL, framework...).</li>
                <li>B·∫°n kh√¥ng th∆∞·ªùng xuy√™n qu√©t v√† ki·ªÉm tra c√°c th∆∞ vi·ªán m√¨nh ƒëang d√πng ƒë·ªÉ ph√°t hi·ªán c√°c l·ªó h·ªïng ƒë√£ ƒë∆∞·ª£c
                    c√¥ng b·ªë (CVEs).</li>
                <li>B·∫°n kh√¥ng v√° l·ªói ho·∫∑c c·∫≠p nh·∫≠t c√°c th√†nh ph·∫ßn k·ªãp th·ªùi ngay c·∫£ khi ƒë√£ c√≥ b·∫£n v√°.</li>
            </ul>
            <p style="background-color: #e3f2fd; border-left: 5px solid #4a90e2; padding: 15px; margin-top: 30px;">
                <strong>L∆∞u √Ω:</strong> Demo n√†y m√¥ ph·ªèng vi·ªác khai th√°c m·ªôt l·ªó h·ªïng XSS t·ªìn t·∫°i trong m·ªôt th∆∞ vi·ªán
                phi√™n b·∫£n c≈©. Khi "c·∫≠p nh·∫≠t th∆∞ vi·ªán", l·ªó h·ªïng s·∫Ω ƒë∆∞·ª£c kh·∫Øc ph·ª•c.
            </p>
            <h2>L√†m th·∫ø n√†o ƒë·ªÉ kh·∫Øc ph·ª•c?</h2>
            <ul>
                <li><strong>Th∆∞·ªùng xuy√™n ki·ªÉm k√™:</strong> Bi·∫øt r√µ m√¨nh ƒëang s·ª≠ d·ª•ng nh·ªØng th√†nh ph·∫ßn n√†o v√† phi√™n b·∫£n
                    bao nhi√™u.</li>
                <li><strong>S·ª≠ d·ª•ng c√°c c√¥ng c·ª• qu√©t ph·ª• thu·ªôc:</strong> C√°c c√¥ng c·ª• nh∆∞ OWASP Dependency-Check, npm
                    audit, Snyk... c√≥ th·ªÉ t·ª± ƒë·ªông qu√©t d·ª± √°n c·ªßa b·∫°n v√† c·∫£nh b√°o v·ªÅ c√°c th∆∞ vi·ªán c√≥ l·ªó h·ªïng.</li>
                <li><strong>Lu√¥n c·∫≠p nh·∫≠t:</strong> Theo d√µi c√°c ngu·ªìn tin b·∫£o m·∫≠t v√† c·∫≠p nh·∫≠t c√°c th√†nh ph·∫ßn l√™n phi√™n
                    b·∫£n v√° l·ªói m·ªõi nh·∫•t ngay khi c√≥ th·ªÉ.</li>
            </ul>
            <div class="mermaid-container">
                <div class="mermaid">
                    sequenceDiagram
                    participant Attacker as K·∫ª t·∫•n c√¥ng
                    participant WebApp as ·ª®ng d·ª•ng Web
                    participant VulnerableLib as Th∆∞ vi·ªán v1.0 (L·ªói th·ªùi)
                    Attacker->>WebApp: 1. T√¨m hi·ªÉu ·ª©ng d·ª•ng d√πng Th∆∞ vi·ªán v1.0
                    Note over Attacker: Attacker t√¨m th·∫•y m·ªôt l·ªó h·ªïng<br />XSS ƒë√£ ƒë∆∞·ª£c c√¥ng b·ªë cho v1.0
                    Attacker->>WebApp: 2. G·ª≠i m·ªôt payload khai th√°c l·ªó h·ªïng ƒë√≥
                    WebApp->>VulnerableLib: 3. G·ªçi h√†m c·ªßa th∆∞ vi·ªán l·ªói ƒë·ªÉ x·ª≠ l√Ω payload
                    Note right of VulnerableLib: Th∆∞ vi·ªán l·ªói th·ª±c thi m√£ ƒë·ªôc!
                    VulnerableLib-->>WebApp: (G√¢y ra l·ªói XSS)
                    WebApp-->>Attacker: Tr√¨nh duy·ªát c·ªßa Attacker (ho·∫∑c<br />n·∫°n nh√¢n kh√°c) b·ªã t·∫•n c√¥ng
                </div>
            </div>
        </div>
    </div>
    <script>
        let isPatched = false;
        function renderComment_v1(comment) {
            // Phi√™n b·∫£n l·ªói th·ªùi, ch√®n th·∫≥ng HTML m√† kh√¥ng l·ªçc
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = comment; // L·ªñ H·ªîNG XSS
            if (tempDiv.querySelector('script') || (tempDiv.querySelector('img') && tempDiv.querySelector('img').hasAttribute('onerror'))) {
                eval(tempDiv.querySelector('img').getAttribute('onerror'));
            }
        }
        function renderComment_v2(comment) {
            // Phi√™n b·∫£n ƒë√£ v√° l·ªói, ch·ªâ hi·ªÉn th·ªã text
            alert("B√¨nh lu·∫≠n ƒë√£ ƒë∆∞·ª£c x·ª≠ l√Ω an to√†n: " + comment);
        }
        function postComment() {
            const comment = document.getElementById('comment').value;
            if (isPatched) {
                renderComment_v2(comment);
            } else {
                renderComment_v1(comment);
            }
        }
        function patchLibrary() {
            isPatched = true;
            document.querySelector('.component-info code').textContent = 'render-comments.js v2.0 (An to√†n)';
            document.getElementById('patched-info').style.display = 'block';
        }
    </script>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10.9.0/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'base' });
    </script>
</body>

</html>